<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Multi-Page Todo App</title>
    <style>
        body {
          margin: 0;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
            'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
            sans-serif;
          background-color: #f0f2f5;
        }

        .app-container {
          width: 100%;
          max-width: 600px;
          margin: 2rem auto;
          padding: 20px;
        }

        main {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .navbar {
          display: flex;
          gap: 1rem;
          padding: 1rem 2rem;
          background-color: white;
          border-radius: 12px;
          margin-bottom: 1.5rem;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .navbar a {
          text-decoration: none;
          color: #4a5568;
          font-weight: 500;
          padding: 0.5rem 0;
          border-bottom: 2px solid transparent;
          transition: all 0.2s;
          cursor: pointer;
        }
        
        /* Note: a specific class like 'active' is needed for styling the active link */
        .navbar a.active {
          color: #3182ce;
          border-bottom-color: #3182ce;
        }

        .navbar a:hover {
            color: #2b6cb0;
        }


        .page-container {
            text-align: center;
        }

        h1 {
          text-align: center;
          color: #1a202c;
        }

        .todo-form {
          display: flex;
          gap: 10px;
          margin-bottom: 1rem;
        }

        .todo-form input {
          flex-grow: 1;
          padding: 12px;
          border: 1px solid #cbd5e0;
          border-radius: 6px;
          font-size: 1rem;
        }

        .todo-form button {
          padding: 12px 20px;
          border: none;
          border-radius: 6px;
          background-color: #3182ce;
          color: white;
          font-size: 1rem;
          cursor: pointer;
          transition: background-color 0.2s;
        }

        .todo-form button:hover {
          background-color: #2b6cb0;
        }

        .controls {
          margin-bottom: 1rem;
          text-align: right;
        }

        .controls button {
          padding: 8px 16px;
          border: 1px solid #cbd5e0;
          border-radius: 6px;
          background-color: #f7fafc;
          cursor: pointer;
          transition: background-color 0.2s;
        }

        .controls button:hover {
          background-color: #e2e8f0;
        }

        .empty-state, .loading-state {
          text-align: center;
          color: #718096;
          padding: 2rem 0;
        }

        .todo-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1rem;
          border-bottom: 1px solid #e2e8f0;
        }

        .todo-item:last-child {
          border-bottom: none;
        }

        .todo-item span {
          cursor: pointer;
          flex-grow: 1;
          color: #2d3748;
        }

        .todo-item.completed span {
          text-decoration: line-through;
          color: #a0aec0;
        }

        .todo-item button {
          background: transparent;
          border: none;
          color: #e53e3e;
          cursor: pointer;
          font-size: 1.2rem;
          font-weight: bold;
          opacity: 0.5;
          transition: opacity 0.2s;
        }

        .todo-item:hover button {
          opacity: 1;
        }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      import React, { useState, useEffect } from 'https://esm.sh/react@18.2.0';
      import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';

      // --- CUSTOM HOOKS ---

      function useLocalStorage(key, initialValue) {
        const [storedValue, setStoredValue] = useState(() => {
          try {
            const item = window.localStorage.getItem(key);
            return item ? JSON.parse(item) : initialValue;
          } catch (error) {
            console.log(error);
            return initialValue;
          }
        });

        useEffect(() => {
          try {
            window.localStorage.setItem(key, JSON.stringify(storedValue));
          } catch (error) {
            console.log(error);
          }
        }, [key, storedValue]);

        return [storedValue, setStoredValue];
      }

      function useToggle(initialValue = false) {
        const [value, setValue] = useState(initialValue);
        const toggle = () => {
          setValue(prevValue => !prevValue);
        };
        return [value, toggle];
      }

      // --- COMPONENTS ---

      function TodoItem({ todo, onToggle, onRemove }) {
        return (
          React.createElement('div', { className: `todo-item ${todo.completed ? 'completed' : ''}` },
            React.createElement('span', { onClick: () => onToggle(todo.id) }, todo.text),
            React.createElement('button', { onClick: () => onRemove(todo.id) }, 'Ã—')
          )
        );
      }

      function TodoList() {
        const [todos, setTodos] = useLocalStorage('todos', []);
        const [inputValue, setInputValue] = useState('');
        const [showCompleted, toggleShowCompleted] = useToggle(true);

        const handleInputChange = (e) => setInputValue(e.target.value);

        const handleAddTodo = (e) => {
          e.preventDefault();
          if (inputValue.trim() === '') return;
          const newTodo = { id: Date.now(), text: inputValue, completed: false };
          setTodos([...todos, newTodo]);
          setInputValue('');
        };

        const toggleTodo = (id) => {
          setTodos(
            todos.map(todo =>
              todo.id === id ? { ...todo, completed: !todo.completed } : todo
            )
          );
        };

        const removeTodo = (id) => {
          setTodos(todos.filter(todo => todo.id !== id));
        };

        const filteredTodos = todos.filter(todo => showCompleted || !todo.completed);

        return (
          React.createElement('div', { className: 'todo-list-container' },
            React.createElement('h1', null, 'Todo List'),
            React.createElement('form', { onSubmit: handleAddTodo, className: 'todo-form' },
              React.createElement('input', { type: 'text', value: inputValue, onChange: handleInputChange, placeholder: 'Add a new todo...' }),
              React.createElement('button', { type: 'submit' }, 'Add')
            ),
            React.createElement('div', { className: 'controls' },
              React.createElement('button', { onClick: toggleShowCompleted }, `${showCompleted ? 'Hide' : 'Show'} Completed`)
            ),
            React.createElement('div', { className: 'todos-container' },
              todos.length === 0
                ? React.createElement('p', { className: 'empty-state' }, 'No todos yet. Add one above!')
                : filteredTodos.map(todo =>
                    React.createElement(TodoItem, { key: todo.id, todo: todo, onToggle: toggleTodo, onRemove: removeTodo })
                  ),
              todos.length > 0 && filteredTodos.length === 0 &&
                React.createElement('p', { className: 'empty-state' }, 'All completed tasks are hidden.')
            )
          )
        );
      }
      
      function Navbar({ setPage, currentPage }) {
        return (
            React.createElement('nav', { className: 'navbar' },
                React.createElement('a', { onClick: () => setPage('home'), className: currentPage === 'home' ? 'active' : '' }, 'Home'),
                React.createElement('a', { onClick: () => setPage('todos'), className: currentPage === 'todos' ? 'active' : '' }, 'Todos'),
                React.createElement('a', { onClick: () => setPage('about'), className: currentPage === 'about' ? 'active' : '' }, 'About')
            )
        );
      }

      // --- PAGES ---

      function HomePage() {
        return (
          React.createElement('div', { className: 'page-container' },
            React.createElement('h1', null, 'Welcome to the Todo App'),
            React.createElement('p', null, 'Navigate to the Todos page to manage your tasks.')
          )
        );
      }

      function AboutPage() {
        return (
          React.createElement('div', { className: 'page-container' },
            React.createElement('h1', null, 'About This App'),
            React.createElement('p', null, 'This is a simple multi-page Todo application built with React.')
          )
        );
      }
      
      function TodosPage() {
          return React.createElement(TodoList);
      }


      // --- MAIN APP ---

      function App() {
        const [page, setPage] = useState('home');

        const renderPage = () => {
          switch (page) {
            case 'todos':
              return React.createElement(TodosPage);
            case 'about':
              return React.createElement(AboutPage);
            case 'home':
            default:
              return React.createElement(HomePage);
          }
        };

        return (
          React.createElement('div', { className: 'app-container' },
            React.createElement(Navbar, { setPage: setPage, currentPage: page }),
            React.createElement('main', null, renderPage())
          )
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(React.createElement(App));
    </script>
  </body>
</html>

